# ⚠️ تحذير مهم: إدارة ملفات البيانات

## المشكلة المحتملة

إذا كان الموقع على استضافة مثل Railway/Vercel/Netlify، قد يعيد نشر من Git في كل مرة، مما يعني أن الملفات في Git هي التي تُستخدم.

## الحلول المطبقة

1. **نسخ احتياطي تلقائي**: يتم إنشاء نسخة احتياطية قبل كل عملية حفظ في `backend/data/backups/`
2. **Logging مفصل**: كل عملية حفظ تُسجل مع timestamp
3. **التحقق من الكتابة**: بعد كل عملية حفظ، يتم التحقق من نجاحها
4. **Endpoint للتحقق**: `/api/data/status` للتحقق من حالة الملفات

## كيفية التحقق من المشكلة

1. افتح `/api/data/status` للتحقق من:
   - تاريخ آخر تعديل للملفات
   - عدد العناصر في كل ملف
   - حجم الملفات

2. تحقق من السجلات (logs) في السيرفر:
   - ابحث عن رسائل `✅ Games data saved successfully`
   - ابحث عن رسائل `✅ Movies data saved successfully`

3. تحقق من النسخ الاحتياطية:
   - افتح `backend/data/backups/`
   - تحقق من وجود نسخ احتياطية حديثة

## إذا كانت المشكلة مستمرة

إذا كانت التحديثات لا تزال تختفي، قد تكون المشكلة في:

1. **Git Repository**: إذا كان هناك `git pull` أو `git checkout` يعيد الملفات
2. **الاستضافة**: إذا كانت الاستضافة تعيد نشر من Git تلقائياً
3. **مشكلة في الصلاحيات**: إذا كان السيرفر لا يستطيع الكتابة في الملفات

## الحل النهائي

إذا كانت المشكلة في Git:
1. تأكد من أن `games.json` و `movies.json` في Git
2. بعد كل تحديث، قم بـ commit و push:
   ```bash
   git add backend/data/games.json backend/data/movies.json
   git commit -m "Update data files"
   git push
   ```

إذا كانت المشكلة في الاستضافة:
- تأكد من أن الاستضافة تحفظ الملفات بشكل دائم
- بعض الاستضافات (مثل Vercel) لا تحفظ الملفات بين إعادة النشر
- استخدم قاعدة بيانات حقيقية (MongoDB, PostgreSQL) بدلاً من ملفات JSON


